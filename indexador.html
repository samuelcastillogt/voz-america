<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="formItem">
        <input type="text" id="pagina">
    </div>
    
    <script src="https://apis.google.com/js/api.js"></script>
<script>
  /**
   * Sample JavaScript code for indexing.urlNotifications.publish
   * See instructions for running APIs Explorer code samples locally:
   * https://developers.google.com/explorer-help/guides/code_samples#javascript
   */

  function authenticate() {
    return gapi.auth2.getAuthInstance()
        .signIn({scope: "https://www.googleapis.com/auth/indexing"})
        .then(function() { console.log("Sign-in successful"); },
              function(err) { console.error("Error signing in", err); });
  }
  function loadClient() {
    gapi.client.setApiKey("-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCoR1veVzsr+FI/\nkYjq5RGuoQ9+udFy8Mdo8D34T5W9SNCp/yuIM4/YskQbPpfBfwcErM3ql2aza4k0\nMDZErN3NhyWq/2iiyKBN5LM2jxRKYG5oncpp0LqPWbXiiVibZNfxibDsuO15XMbV\n7idA8TChzp6WP51/RSjbdkP59Ve+ToAIt+kSxzHwzT1UoHELdvRRXzeQ4D4RkuSk\nnphZ5QWSy6Z9DJhRG1SMLikpcsiowgiGIxcHhv8FMvlHfWjkRqpXWe0ceONO+Thl\nIW1eWcg7prWjvFFOFlIhnb9gMKYIryfyAuJinq6NH4RIjLma27922vXCUzT+oT4Y\nafwkf/+dAgMBAAECggEABGVY0QYWVZ+3BlIW8YvqWlV6wiS4g/gmPWeJNuNdVgSA\n7u/rgzNVnqOJg+yuqi9XT5f0CRzLYgR9IQ/hWwnpAWV2ZnElmpsDFQXUaKh0Lz01\npSX6E6mQNg5x4ekUl3qa6YRfSs/J5FG4H/6Ip/mk+5UaL3KZ+qkj2BfOzsjJ8f6w\nGWHFeoN57JPA9B5mcz4GV03v8rtHdnvH/tlcdWBxg9MKDU7Wbm/9N81F10sL9Lyg\nLW/8RLf/avNcV7K4tIaQRiqYNXYQ2LAoviw9FaP7DEzHe1qS/Gastye/p8vVUo+x\nLzgk+K4JGdpglZVFr9ZlOqclyjk83mqfq+ZA7DkvQQKBgQDgB3IiaLkiA35tIBcZ\nrHmfvB4x2Soz12jAOdYpFLV65zo99qGia/yTE7vRv+3HmAFicoitCM8pY3uJHNPl\nlSCTd+GuUAPO1ShKKWpWGQFQP/1QgbId9U0euoiRMhRUBZTVAhE2C5okvI9dIwQb\nAvqsgWJ+j7BGNC4IP9WT2gSzZwKBgQDASyk8dBSTgf3WNKIUIoHg8ewzE1c1B2/A\nu+0GMB3Dc9vk4mWdx3Mkyp3CZJoND3gjYCO6oyoOnIQaxlDt45g2dvdKwMCykZdL\nyoWOnbWsk5zd731KOqGOpJ7tpmlP3BKWFzjSfz2xTtjCqqOlAbxtt86HvYxW6tMy\nemKju8+2WwKBgCP0TfcDw6KX2PR+j/aI3cQrFtV9Ou6zBZbEMYDKWA3vikNjj7FX\nj2OzaRNSsEC2PpKkOxc6MLU9yBfLTp6r/lxsgwXMxa+uOhcc6noC7VkJzAfdqM5y\nDfx+h2h2FxkdBDPjbwuzdPusX33dHs2O/tgss7gIK4w416JvTEG8XcDFAoGAbagu\n+s+DkF7X31iiePL4t8ueE75aw93ax8EjOJ0ly/j9E/hbVG+R5RA6iMmP5BTHQP0p\nQtybNjvhRdeD/TUF70FGYnWrLenCqrDyGtMq8CA5m4JgI31t9gdArmtwsN7iJn9V\nowx2pO8+wzxGF+n2h2cDOvtH1aUSDT4nlBGdMPMCgYBpCzSzgOK0Ji5ZYETHimei\nIIjBsaQIwwhDY9qyUJb7/bbWYJLgbEdL/ohDxnb9eRP/ORNq53owBs4CmgATUny2\nkxWP5RUNzogj63je4wcCd0wXZjHUDwkSlecIqHWaW/r8OLXpWlmqJ1k3aJr/ZSZI\n9l8aUOCaOCFlt3rYYrmuvg==\n-----END PRIVATE KEY-----\n");
    return gapi.client.load("https://content.googleapis.com/discovery/v1/apis/indexing/v3/rest")
        .then(function() { console.log("GAPI client loaded for API"); },
              function(err) { console.error("Error loading GAPI client for API", err); });
  }
  // Make sure the client is loaded and sign-in is complete before calling this method.
  function execute() {
      const url = document.getElementById("pagina")
    return gapi.client.indexing.urlNotifications.publish({
        
      "resource": {
        "url": url,
        "type": "URL_UPDATED"
      }
    })
        .then(function(response) {
                // Handle the results here (response.result has the parsed body).
                console.log("Response", response);
              },
              function(err) { console.error("Execute error", err); });
  }
  gapi.load("client:auth2", function() {
    gapi.auth2.init({client_id: "169350610182-mabhi2glasepq4mo5iu5oof60vueq0ai.apps.googleusercontent.com"});
  });
</script>
<button onclick="authenticate().then(loadClient)">authorize and load</button>
<button onclick="execute()">execute</button>
<button onclick="execute()">ex</button>

</body>
</html>